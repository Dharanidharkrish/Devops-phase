pipeline
{
    agent any
    
    tools{
    maven 'Maven'
    }
    
   stages{
    stage('Build')
        {
            steps{
              sh 'mvn clean install'
                 }
         }
     
     stage('SonarQube analysis') {
       steps{
        withSonarQubeEnv('SonarQube') {
            sh 'mvn package sonar:sonar'
           }
       }
   }
   
    stage('Nexus')
    {
     steps{
     nexusPublisher nexusInstanceId: 'CNexus', nexusRepositoryId: 'devopstraining', packages: [[$class: 'MavenPackage', mavenAssetList: [[classifier: '', extension: '', filePath: '/var/lib/jenkins/.m2/repository/com/maven/test/']], mavenCoordinate: [artifactId: 'test', groupId: 'com.maven', packaging: 'jar', version: '0.0.1-SNAPSHOT']]]
     }
    }
   
    
  }
}
